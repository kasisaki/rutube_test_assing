
# Тестовое задание от RUTUBE

*Read this in other languages: [English](README.en.md)*

Решение тестовой задачи от Rutube

Задание сформулировано следующим образом:

```
Написать сервис для поздравлений с днем рождения
• Цель удобное поздравление сотрудников
• Получение списка сотрудников любым способом(api/ad ldap/прямая регистрация)
• Авторизация
• Возможность подписаться/отписаться от оповещения о дне рождения

• Оповещение о ДР того, на кого подписан

• Внешнее взаимодействие (json арi или фронт или тг бот)
• В случае взаимодействия через телеграм бот (создание группы и добавление в нее всех подписанных)
• В случае взаимодействие через фронт настройка времени оповещения до дня рождения на почту: 

• Желательно предоставить юнит тесты;

• Обязательно нужно добавлять в репозиторий файл README с информацией о том, как запускать приложение, и как запускать тесты. А так же описать систему каталогов, что и где у вас расположено.
```

## Описание
### Авторизация:

Используется JWT для токенов. Пользователь отправляет логин и пароль и получает токен для дальнейшей авторизации.
### Управление сотрудниками:

API для добавления сотрудников, где указывается их имя, email и день рождения.
### Подписки на оповещения:

Пользователь может подписаться на оповещение о дне рождения сотрудника, указав количество дней до события для получения уведомления.
Пользователь может отписаться от оповещения.
### Оповещения:

Фоновый процесс, который ежедневно проверяет дни рождения сотрудников и отправляет email-оповещения пользователям, подписанным на них.

## Локальный запуск

Клонирование репозитория

```bash
  git clone https://github.com/kasisaki/rutube_test_assing
```

Перейти в каталог проекта

```bash
  rutube_test_assing
```

Установить зависимости

```bash
  go mod tidy
```

Запуск сервера

```bash
  go run main.go
```

 # Описание тестов
### • auth_test.go:

Тестирует функции login и authenticate, проверяя корректность генерации JWT и проверки авторизации.
### • subscription_handlers_test.go:

Тестирует функции addEmployee, subscribe и unsubscribe, проверяя добавление сотрудников, подписку и отписку.
### • notification_handlers_test.go:

Тестирует функцию sendBirthdayNotifications. Этот тест требует более сложной инфраструктуры для проверки отправки почты, что может быть реализовано через моки или логи.
## Запуск тестов

Чтобы запустить тесты, выполните следующую команду

```bash
  go test ./test -v
```

